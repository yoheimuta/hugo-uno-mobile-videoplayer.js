  <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Introduction &middot; mobile-videoplayer.js </title>
    
    <link rel="stylesheet" type="text/css" href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/css/uno.min.css" />
    <link rel="stylesheet" type="text/css" href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/css/lightGallery.css" />
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/favicon.ico">
    
    <link href="" rel="alternate" type="application/rss+xml" title="mobile-videoplayer.js" />
    
    <script src="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/js/jquery.min.js"></script>
    <script src="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/js/main.min.js">
    </script>

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-58932361-1", 'auto');
  ga('send', 'pageview');
</script>


</head>

  <body>
    <span class="mobile btn-mobile-menu">
        <i class="fa fa-bars btn-mobile-menu__icon"></i>
        <i class="fa fa-times btn-mobile-close__icon hidden"></i>
    </span>
<header class="panel-cover panel-cover--collapsed" >
    <div class="panel-main">
        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content"> 
                <a href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js" title="link to homepage for mobile-videoplayer.js"> <img src="https://golang.org/doc/gopher/run.png" width="80" alt="mobile-videoplayer.js logo" class="panel-cover__logo logo" /> </a> 
                <h1 class="panel-cover__title panel-title">
                    <a href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js" title="link to homepage for mobile-videoplayer.js">mobile-videoplayer.js</a>
                </h1>
                <hr class="panel-cover__divider" />
                <p class="panel-cover__description">  Web video player for mobile browser, especially for ios safari which is disabled to autoplay mp4  </p>
                <hr class="panel-cover__divider panel-cover__divider--secondary" />
                <div class="navigation-wrapper">
                    <nav class="cover-navigation cover-navigation--primary">
                        <ul class="navigation">
                            <li class="navigation__item"><a href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/#blog" title="link to mobile-videoplayer.js blog" class="blog-button">Blog</a> </li>
                            </br>  </ul>
                    </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/yoheimuta" title="@yoheimuta on Twitter"> <i class='fa fa-tt'></i> <span class="label">Twitter</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://bitbucket.org/yoheimuta" title="yoheimuta on bitbucket"> <i class='fa fa-bitbucket'></i> <span class="label">Bitbucket</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://github.com/yoheimuta/mobile-videoplayer.js" title="yoheimuta/mobile-videoplayer.js on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br>   
        
        <li class="navigation__item">
            <a href="mailto:yoheimuta@gmail.com" title="Email yoheimuta@gmail.com"> <i class='fa fa-envelope-o'></i> <span class="label">Email</span> </a>
        </li>  </ul>
</nav>
 </div>
            </div>
        </div>
        <div class="panel-cover--overlay"></div>
    </div>
</header>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <div class="post">
          <h1>Introduction</h1>
          <span class="post-date">Thu, Jan 22, 2015</span>
          

<p><code>mobile-videoplayer.js</code> is the videoplayer for mobile browser, especially for ios safari which is disabled to autoplay mp4, inspired by <a href="https://github.com/shin1ohno/jani">jani</a>.</p>

<p>Note that <code>tamagotchi_4u.mp4</code> which is used to show this product demo is <a href="http://creativecommons.org/licenses/by/2.1/jp/">CC BY</a>, belonged to BandaiJP.</p>

<h3 id="toc_0">Demo</h3>

<iframe width="320" height="240" src="http://yoheimuta.github.io/mobile-videoplayer.js" frameborder="0" scrolling=no></iframe>

<h3 id="toc_1">Usage</h3>

<p>Create the container tag.</p>

<ul>
<li><code>load-scene</code> class element is displayed until the video is finished loading.</li>
<li><code>play-scene</code> class element has one or multiple strip class elements. See <a href="http://yoheimuta.github.io/hugo-uno-mobile-videoplayer.js/README.md#question">Question</a> below to understand why you must prepare multiple images to show long video.</li>
<li><code>replay-scene</code> class element and <code>done-scene</code> class element are displayed after the video is finished playing.</li>
<li><code>replay-scene</code> class element is going to be registered click event to replay the video.</li>
</ul>

<p>Set <code>data-*-url</code> to send fine-grained impression trackings following <code>VAST</code> format as close as possible.</p>

<pre><code class="language-html">&lt;div id=&quot;video_container&quot;&gt;
  &lt;div class=&quot;load-scene&quot;&gt;
      &lt;img src=&quot;http://placehold.it/320x180&quot;&gt;
  &lt;/div&gt;

  &lt;div
      class=&quot;play-scene&quot;
      data-frame-width=320
      data-frame-height=180
      data-fps=12
      data-did-start-url=&quot;&quot;
      data-did-resume-url=&quot;&quot;
      data-did-complete-url=&quot;&quot;
      data-first-quartile-url=&quot;&quot;
      data-midpoint-url=&quot;&quot;
      data-third-quartile-url=&quot;&quot;
      data-did-pause-url=&quot;&quot;
      style=&quot;display: none;&quot;
      &gt;
      &lt;div
          data-url=&quot;assets/tamagotchi_320x180_1.a9ac945e.jpg&quot;
          class=&quot;strip&quot;
          &gt;
          &lt;img&gt;
      &lt;/div&gt;
      &lt;div
          data-url=&quot;assets/tamagotchi_320x180_2.d10717e2.jpg&quot;
          class=&quot;strip&quot;
          style=&quot;display: none;&quot;
          &gt;
          &lt;img&gt;
      &lt;/div&gt;
      &lt;div
          data-url=&quot;assets/tamagotchi_320x180_3.a6a03603.jpg&quot;
          class=&quot;strip&quot;
          style=&quot;display: none;&quot;
          &gt;
          &lt;img&gt;
      &lt;/div&gt;
      &lt;div
          data-url=&quot;assets/tamagotchi_320x180_4.0895f168.jpg&quot;
          class=&quot;strip&quot;
          style=&quot;display: none;&quot;
          &gt;
          &lt;img&gt;
      &lt;/div&gt;
  &lt;/div&gt;

  &lt;div class=&quot;replay-scene&quot; style=&quot;display: none;&quot;&gt;
      &lt;p&gt;replay ?&lt;/p&gt;
  &lt;/div&gt;

  &lt;div class=&quot;done-scene&quot; style=&quot;display: none;&quot;&gt;
      &lt;img src=&quot;http://placehold.it/320x180&quot;&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p>Insert the script.</p>

<p>Pass <code>container element id</code> as 1st arg and <code>is_debug flag to console log</code> as 2nd arg.</p>

<pre><code class="language-html">&lt;script src=&quot;mvplayer.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
window.onload = function(){
    MVPlayer.Controller.run(document.getElementById(&quot;video_container&quot;), true);
};
&lt;/script&gt;
</code></pre>

<h3 id="toc_2">Support</h3>

<p>Confirmed to work well in these browsers listed below.</p>

<pre><code>IE6, IE7, IE8, Safari(7.1/8), Firefox(31), Chrome(39),
iOS Safari(iOS6, iOS7, iOS8), Android(2.2, 4.4, 5)
</code></pre>

<p>Also confirmed that time to complete loading and then start almost video is about 3~4 sec in mobile 3G network.</p>

<h3 id="toc_3">Namespace</h3>

<p><code>mobile-videoplayer.js</code> use only one global variable <code>MVPlayer</code> to avoid polluting other global namespace.</p>

<h3 id="toc_4">Install</h3>

<p>Install grunt and bower commands.</p>

<pre><code class="language-sh">sudo npm install -g grunt-cli
sudo npm install -g bower
</code></pre>

<p>Then install node module local dependencies.</p>

<pre><code class="language-sh">npm install
</code></pre>

<p>And install bower components.</p>

<pre><code class="language-sh">bower install
</code></pre>

<h3 id="toc_5">Run</h3>

<pre><code class="language-sh">grunt
</code></pre>

<p>Then access <code>http://localhost:9000/</code> or <code>http://localhost:9000/scroll.html</code>.</p>

<h3 id="toc_6">Test</h3>

<p>Run tests using only PhantomJS.</p>

<pre><code class="language-sh">grunt
</code></pre>

<p>Run tests using FireFox, Chrome, Safari, PhantomJS and other (see <code>Grunt.coffee</code>).</p>

<pre><code class="language-sh">grunt testem:run:long
</code></pre>

<p>Run tests to generate test coverage.</p>

<pre><code class="language-sh">grunt testem:run:long
open coverage/lcov-report/index.html
</code></pre>

<h3 id="toc_7">Convert mp4 to jpgs</h3>

<p>Use <a href="https://github.com/shin1ohno/jani-strip_maker">jani-strip_maker</a>.</p>

<pre><code class="language-sh">./bin/strip_maker from_movie_to_strips --input_file ./src/assets/tamagotchi_4u.mp4 --fps 12 --height 180 --width 320
</code></pre>

<h3 id="toc_8">Question</h3>

<p>The reason why multiple images are needed is that <a href="http://www.tomshardware.com/reviews/ipad-3-benchmark-review,3156-5.html">mobile version of Safari automatically downsamples any jpg when it hits the 1024x1024 pixel limit</a>.</p>

<ul>
<li>According to <a href="https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html">Apple&rsquo;s Guideline about Know iOS Resource Limits</a>, the limit about 1024 pixel seems to me not to be applied to jpg.</li>
<li>But when I tried to use an over 1024 pixel jpg in mobile version of Safari, I could confirm to be rendered a terribly coarse one.</li>
</ul>

<p><a href="https://github.com/shin1ohno/jani-strip_maker">jani-strip_maker</a> is supported to split into multiple jpgs automatically for avoiding this limit.</p>

<h3 id="toc_9">Licence</h3>

<p>Licensed under the MIT license.</p>

        </div>
        
<section class="post-comments">
<a class="muut" href="https://muut.com/i/mobilevideoplayerjs/comments:Introduction">Comments</a>
<script src="//cdn.muut.com/1/moot.min.js"></script>
</section>


        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
    style="display:inline-block;width:728px;height:90px"
    data-ad-client="ca-pub-8241408381938011"
    data-ad-slot="8060364884"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<script type="text/javascript">
    var nend_params = {"media":22960,"site":117525,"spot":306595,"type":1,"oriented":1};
</script>
<script type="text/javascript" src="http://js1.nend.net/js/nendAdLoader.js"></script>

      </div>
    </div>
  </body>
  
</html>
